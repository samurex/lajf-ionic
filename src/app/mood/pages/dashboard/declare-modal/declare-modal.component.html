<ion-content>
  <div class="header">
    <h1>How are you feeling today?</h1>
    <h3>Declare your health and share with the world!</h3>
  </div>
  
  <form [formGroup]="declareForm" novalidate (ngSubmit)="declare(declareForm)">
    <moods-picker formControlName="mood_id" [moods]="moods$ | async"></moods-picker>
    <ion-list lines="none">
      <ion-item class="range">
        <ion-label position="stacked">Put a number on how you feel  <strong *ngIf="declareForm.value.scale !== null">{{ declareForm.value.scale }}/{{ 10 }}</strong></ion-label>
        <ion-range formControlName="scale" min="0" max="10" step="1" snaps="true" color="primary">
        </ion-range>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">
          Share your feelings
          <span class="ion-float-right">{{ declareForm.value.feelings.length }}/{{ MAX_LENGTH }}</span>
        </ion-label>
        <ion-textarea formControlName="feelings" rows="4" maxlength="{{ MAX_LENGTH }}"></ion-textarea>
      </ion-item>
      <ion-item>
        <ion-label>Share with others</ion-label>
        <ion-toggle formControlName="share"></ion-toggle>
      </ion-item>
    </ion-list>
    <div class="ion-padding">
      <ion-button type="submit" fill="solid" expand="block" color="primary" size="large" [disabled]="!declareForm.valid || !position">
        Declare my mood
      </ion-button>
    </div>
  </form>
</ion-content>
